## v7.6 Pre-Tag Audit

Runtime is feature-complete; use this checklist to validate telemetry/state surfaces and tag v7.6 safely.

### Runtime Preflight Checklist
- `make test-fast`
- Targeted integration tests:
  - `pytest -q tests/integration/test_manifest_state_contract.py tests/integration/test_state_surface_health.py tests/integration/test_state_publish_diagnostics.py tests/integration/test_state_publish_factor_diagnostics.py tests/integration/test_risk_snapshot_contract.py tests/integration/test_state_positions_ledger_contract.py`
- `make pretag-v7.6` (runs version check, test-fast, subset above)
- Optional short dry-run: `DRY_RUN=1 BINANCE_TESTNET=1 MAX_LOOPS=2 LOOP_SLEEP=1 python execution/executor_live.py`

### State Surfaces Checklist
- All canonical state files present under `logs/state/`:
  - `nav.json`, `nav_state.json`, `positions_state.json`, `positions_ledger.json`
  - `risk_snapshot.json`, `diagnostics.json`, `router_health.json`
  - `symbol_scores_v6.json`, `factor_diagnostics.json`, `engine_metadata.json`
- Each file carries a fresh `updated_ts` and no schema violations per `scripts/preflight_v7_6.py`.
- Cross-surface: positions ledger matches open positions; no missing TP/SL coverage.

### Dashboard Checklist
- NAV/risk panel renders (nav_state + risk_snapshot fresh)
- Router quality and regime strip render (router_health + kpis_v7)
- Factor diagnostics panel renders (factor_diagnostics populated)
- Exit coverage & mismatch breakdown visible (diagnostics.json exit_pipeline block)
- System Health panel shows engine version and no missing/stale surfaces

### Tag / Release Steps
- Confirm `VERSION = v7.6`
- Confirm `docs_version = "v7.6"` in `v7_manifest.json`
- Clean git state and tag:
  - `git status` (clean)
  - `git tag v7.6`
  - `git push origin v7.6`

---

## Tagging & Rollback

Once all sections above are green:

### 1. Tag v7.6 in Git

```bash
git status    # ensure clean working directory
git tag v7.6
git push origin v7.6
```

### 2. Document Activation in Ops Log

Record the following in your operations log:

| Field | Value |
|-------|-------|
| Date/Time | `YYYY-MM-DD HH:MM UTC` |
| Commit Hash | `git rev-parse HEAD` |
| VERSION | `v7.6` |
| Preflight Commands | `make pretag-v7.6`, `python scripts/runtime_sanity_check_v7_6.py` |
| Preflight Results | PASS / FAIL (with notes) |
| Anomalies Observed | List any issues or "None" |

### 3. Rollback Reference

If rollback is required:

- **Previous stable tag**: v7.5 (or earlier as appropriate)
- **Rollback procedure**: see [v7.6 Runtime Activation Runbook â€” Rollback Plan](v7.6_Runtime_Activation.md#5-rollback-plan)

**Quick rollback commands:**
```bash
git fetch --tags origin
git checkout v7.5
sudo supervisorctl restart hedge:
```

**State compatibility note**: v7.6 state surfaces are forward-compatible. On rollback to v7.5:
- v7.5 will read v7.6 state files successfully (ignores new fields)
- Some v7.6-only fields (e.g., `mismatch_breakdown`, `anomalies`) will be absent
- No data loss or corruption expected
