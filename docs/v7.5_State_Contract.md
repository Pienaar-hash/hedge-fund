# v7.5 State Contract â€” Single Writer Policy

This release stabilizes the runtime state contract by assigning **one canonical writer** per state file under `logs/state/`. Helper utilities may be shared, but each file must only be written by its designated owner.

| State File                          | Canonical Writer        | Purpose                            |
|-------------------------------------|-------------------------|------------------------------------|
| logs/state/nav_state.json           | sync_state.py           | NAV, AUM, FX snapshots             |
| logs/state/positions_state.json     | executor_live.py        | Live futures positions snapshot    |
| logs/state/positions_ledger.json    | executor_live.py        | Unified position + TP/SL ledger    |
| logs/state/risk_snapshot.json       | executor_live.py        | Risk KPIs, DD, VaR, CVaR, caps     |
| logs/state/router_state.json        | executor_live.py        | Router quality, slippage, TWAP     |
| logs/state/factor_diagnostics.json  | executor_live.py        | Factor diagnostics, weights, ortho status |

Key rules:

- **Single-writer rule:** At most one process may write a given `logs/state/*.json` file.
- Shared helpers (e.g., `_write_json_state(path, payload)`) are fine, but the **callsite ownership** stays unique.
- Non-owners must treat these files as read-only; if an alternate snapshot is needed, write to a separate filename.
